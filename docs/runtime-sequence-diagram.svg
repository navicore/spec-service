<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1793px" preserveAspectRatio="none" style="width:1331px;height:1793px;background:#FFFFFF;" version="1.1" viewBox="0 0 1331 1793" width="1331px" zoomAndPan="magnify"><title>Spec Service - Runtime View: Create and Publish Spec</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="669.1953" x="329.6648" y="37.1182">Spec Service - Runtime View: Create and Publish Spec</text><line style="stroke:#000000;stroke-width:1;" x1="28" x2="28" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="244.1641" x2="244.1641" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="414.7695" x2="414.7695" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="645.0806" x2="645.0806" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="810.4907" x2="810.4907" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="931.1646" x2="931.1646" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="1085.2476" x2="1085.2476" y1="130.752" y2="1711.3164"/><line style="stroke:#000000;stroke-width:1;" x1="1293.4438" x2="1293.4438" y1="130.752" y2="1711.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="127.8125">User</text><ellipse cx="28.9277" cy="61.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9277,69.7373 L28.9277,96.7373 M15.9277,77.7373 L41.9277,77.7373 M28.9277,96.7373 L15.9277,111.7373 M28.9277,96.7373 L41.9277,111.7373 " fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="1724.3916">User</text><ellipse cx="28.9277" cy="1736.3311" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9277,1744.3311 L28.9277,1771.3311 M15.9277,1752.3311 L41.9277,1752.3311 M28.9277,1771.3311 L15.9277,1786.3311 M28.9277,1771.3311 L41.9277,1786.3311 " fill="none" style="stroke:#000000;stroke-width:1;"/><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.6113" x="205.1641" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.6113" x="212.1641" y="119.8125">REST API</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="79.6113" x="205.1641" y="1710.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.6113" x="212.1641" y="1731.3916">REST API</text><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="85.4971" x="372.7695" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71.4971" x="379.7695" y="102.7979">Command</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54.667" x="388.1846" y="119.8125">Handler</text><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="85.4971" x="372.7695" y="1710.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71.4971" x="379.7695" y="1731.3916">Command</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54.667" x="388.1846" y="1748.4063">Handler</text><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="86.3174" x="602.0806" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="33.9268" x="628.2759" y="102.7979">Spec</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72.3174" x="609.0806" y="119.8125">Aggregate</text><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="86.3174" x="602.0806" y="1710.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="33.9268" x="628.2759" y="1731.3916">Spec</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72.3174" x="609.0806" y="1748.4063">Aggregate</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="96.6738" x="762.4907" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82.6738" x="769.4907" y="119.8125">Event Store</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="96.6738" x="762.4907" y="1710.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82.6738" x="769.4907" y="1731.3916">Event Store</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.5264" x="889.1646" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.5264" x="896.1646" y="119.8125">Event Bus</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.5264" x="889.1646" y="1710.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.5264" x="896.1646" y="1731.3916">Event Bus</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="91.376" x="1040.2476" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.376" x="1047.2476" y="119.8125">Projections</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="91.376" x="1040.2476" y="1710.3164"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.376" x="1047.2476" y="1731.3916">Projections</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.0811" x="1267.4438" y="127.8125">SQLite</text><path d="M1275.4844,77.7373 C1275.4844,67.7373 1293.4844,67.7373 1293.4844,67.7373 C1293.4844,67.7373 1311.4844,67.7373 1311.4844,77.7373 L1311.4844,103.7373 C1311.4844,113.7373 1293.4844,113.7373 1293.4844,113.7373 C1293.4844,113.7373 1275.4844,113.7373 1275.4844,103.7373 L1275.4844,77.7373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1275.4844,77.7373 C1275.4844,87.7373 1293.4844,87.7373 1293.4844,87.7373 C1293.4844,87.7373 1311.4844,87.7373 1311.4844,77.7373 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.0811" x="1267.4438" y="1724.3916">SQLite</text><path d="M1275.4844,1737.3311 C1275.4844,1727.3311 1293.4844,1727.3311 1293.4844,1727.3311 C1293.4844,1727.3311 1311.4844,1727.3311 1311.4844,1737.3311 L1311.4844,1763.3311 C1311.4844,1773.3311 1293.4844,1773.3311 1293.4844,1773.3311 C1293.4844,1773.3311 1275.4844,1773.3311 1275.4844,1763.3311 L1275.4844,1737.3311 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1275.4844,1737.3311 C1275.4844,1747.3311 1293.4844,1747.3311 1293.4844,1747.3311 C1293.4844,1747.3311 1311.4844,1747.3311 1311.4844,1737.3311 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1319.5249" x="5" y="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1324.5249" y1="161.6516" y2="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1324.5249" y1="164.6516" y2="164.6516"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="105.2349" x="612.145" y="150.752"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86.7915" x="618.145" y="167.8218">Create Spec</text><polygon fill="#000000" points="232.9697,218.1499,242.9697,222.1499,232.9697,226.1499,236.9697,222.1499" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="28.9277" x2="238.9697" y1="222.1499" y2="222.1499"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.6055" x="35.9277" y="201.6211">POST /specs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.042" x="35.9277" y="217.4204">{name, content, description}</text><polygon fill="#000000" points="403.5181,247.9492,413.5181,251.9492,403.5181,255.9492,407.5181,251.9492" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="244.9697" x2="409.5181" y1="251.9492" y2="251.9492"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143.2031" x="251.9697" y="247.2197">CreateSpec command</text><polygon fill="#000000" points="633.2393,277.7485,643.2393,281.7485,633.2393,285.7485,637.2393,281.7485" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="639.2393" y1="281.7485" y2="281.7485"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.9419" x="422.5181" y="277.019">Spec::create(command)</text><line style="stroke:#000000;stroke-width:1;" x1="645.2393" x2="687.2393" y1="327.3472" y2="327.3472"/><line style="stroke:#000000;stroke-width:1;" x1="687.2393" x2="687.2393" y1="327.3472" y2="340.3472"/><line style="stroke:#000000;stroke-width:1;" x1="646.2393" x2="687.2393" y1="340.3472" y2="340.3472"/><polygon fill="#000000" points="656.2393,336.3472,646.2393,340.3472,656.2393,344.3472,652.2393,340.3472" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.5962" x="652.2393" y="306.8184">Validate name</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.2505" x="652.2393" y="322.6177">Validate YAML</text><polygon fill="#000000" points="426.5181,366.1465,416.5181,370.1465,426.5181,374.1465,422.5181,370.1465" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="420.5181" x2="644.2393" y1="370.1465" y2="370.1465"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.5542" x="432.5181" y="365.417">[SpecCreated event]</text><polygon fill="#000000" points="798.8276,395.9458,808.8276,399.9458,798.8276,403.9458,802.8276,399.9458" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="804.8276" y1="399.9458" y2="399.9458"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.4521" x="422.5181" y="395.2163">append_events()</text><polygon fill="#000000" points="1281.4844,425.7451,1291.4844,429.7451,1281.4844,433.7451,1285.4844,429.7451" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="810.8276" x2="1287.4844" y1="429.7451" y2="429.7451"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.2368" x="817.8276" y="425.0156">INSERT INTO events</text><polygon fill="#000000" points="426.5181,455.5444,416.5181,459.5444,426.5181,463.5444,422.5181,459.5444" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="420.5181" x2="809.8276" y1="459.5444" y2="459.5444"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.1924" x="432.5181" y="454.8149">EventEnvelope</text><polygon fill="#000000" points="919.4277,485.3438,929.4277,489.3438,919.4277,493.3438,923.4277,489.3438" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="925.4277" y1="489.3438" y2="489.3438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.8975" x="422.5181" y="484.6143">publish(event)</text><polygon fill="#000000" points="1073.9355,515.1431,1083.9355,519.1431,1073.9355,523.1431,1077.9355,519.1431" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="931.4277" x2="1079.9355" y1="519.1431" y2="519.1431"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.5078" x="938.4277" y="514.4136">update_projection()</text><polygon fill="#000000" points="1281.4844,544.9424,1291.4844,548.9424,1281.4844,552.9424,1285.4844,548.9424" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1085.9355" x2="1287.4844" y1="548.9424" y2="548.9424"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183.5488" x="1092.9355" y="544.2129">INSERT INTO specs_current</text><polygon fill="#000000" points="255.9697,574.7417,245.9697,578.7417,255.9697,582.7417,251.9697,578.7417" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="249.9697" x2="414.5181" y1="578.7417" y2="578.7417"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.6509" x="261.9697" y="574.0122">{id, version: 1}</text><polygon fill="#000000" points="39.9277,620.3403,29.9277,624.3403,39.9277,628.3403,35.9277,624.3403" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="33.9277" x2="243.9697" y1="624.3403" y2="624.3403"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.5073" x="45.9277" y="603.8115">201 Created</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.9126" x="45.9277" y="619.6108">{id, version}</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1319.5249" x="5" y="653.24"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1324.5249" y1="653.24" y2="653.24"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1324.5249" y1="656.24" y2="656.24"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="109.4688" x="610.0281" y="642.3403"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="91.0254" x="616.0281" y="659.4102">Update Spec</text><polygon fill="#000000" points="232.9697,709.7383,242.9697,713.7383,232.9697,717.7383,236.9697,713.7383" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="28.9277" x2="238.9697" y1="713.7383" y2="713.7383"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="106.0757" x="35.9277" y="693.2095">PUT /specs/{id}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="65.6094" x="35.9277" y="709.0088">{content}</text><polygon fill="#000000" points="403.5181,739.5376,413.5181,743.5376,403.5181,747.5376,407.5181,743.5376" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="244.9697" x2="409.5181" y1="743.5376" y2="743.5376"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.5483" x="251.9697" y="738.8081">UpdateSpec command</text><polygon fill="#000000" points="798.8276,769.3369,808.8276,773.3369,798.8276,777.3369,802.8276,773.3369" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="804.8276" y1="773.3369" y2="773.3369"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.0083" x="422.5181" y="768.6074">get_events(id)</text><polygon fill="#000000" points="1281.4844,799.1362,1291.4844,803.1362,1281.4844,807.1362,1285.4844,803.1362" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="810.8276" x2="1287.4844" y1="803.1362" y2="803.1362"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.7944" x="817.8276" y="798.4067">SELECT FROM events</text><polygon fill="#000000" points="426.5181,828.9355,416.5181,832.9355,426.5181,836.9355,422.5181,832.9355" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="420.5181" x2="809.8276" y1="832.9355" y2="832.9355"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="55.1104" x="432.5181" y="828.2061">[events]</text><polygon fill="#000000" points="633.2393,858.7349,643.2393,862.7349,633.2393,866.7349,637.2393,862.7349" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="639.2393" y1="862.7349" y2="862.7349"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.3315" x="422.5181" y="858.0054">from_events(events)</text><polygon fill="#000000" points="633.2393,888.5342,643.2393,892.5342,633.2393,896.5342,637.2393,892.5342" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="639.2393" y1="892.5342" y2="892.5342"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.7212" x="422.5181" y="887.8047">handle_command(UpdateSpec)</text><line style="stroke:#000000;stroke-width:1;" x1="645.2393" x2="687.2393" y1="922.3335" y2="922.3335"/><line style="stroke:#000000;stroke-width:1;" x1="687.2393" x2="687.2393" y1="922.3335" y2="935.3335"/><line style="stroke:#000000;stroke-width:1;" x1="646.2393" x2="687.2393" y1="935.3335" y2="935.3335"/><polygon fill="#000000" points="656.2393,931.3335,646.2393,935.3335,656.2393,939.3335,652.2393,935.3335" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.5884" x="652.2393" y="917.604">Check state != Deleted</text><polygon fill="#000000" points="426.5181,961.1328,416.5181,965.1328,426.5181,969.1328,422.5181,965.1328" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="420.5181" x2="644.2393" y1="965.1328" y2="965.1328"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138.8994" x="432.5181" y="960.4033">[SpecUpdated event]</text><polygon fill="#000000" points="798.8276,990.9321,808.8276,994.9321,798.8276,998.9321,802.8276,994.9321" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="804.8276" y1="994.9321" y2="994.9321"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.4521" x="422.5181" y="990.2026">append_events()</text><polygon fill="#000000" points="1281.4844,1020.7314,1291.4844,1024.7314,1281.4844,1028.7314,1285.4844,1024.7314" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="810.8276" x2="1287.4844" y1="1024.7314" y2="1024.7314"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.2368" x="817.8276" y="1020.002">INSERT INTO events</text><polygon fill="#000000" points="919.4277,1050.5308,929.4277,1054.5308,919.4277,1058.5308,923.4277,1054.5308" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="925.4277" y1="1054.5308" y2="1054.5308"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.8975" x="422.5181" y="1049.8013">publish(event)</text><polygon fill="#000000" points="1073.9355,1080.3301,1083.9355,1084.3301,1073.9355,1088.3301,1077.9355,1084.3301" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="931.4277" x2="1079.9355" y1="1084.3301" y2="1084.3301"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.5078" x="938.4277" y="1079.6006">update_projection()</text><polygon fill="#000000" points="1281.4844,1110.1294,1291.4844,1114.1294,1281.4844,1118.1294,1285.4844,1114.1294" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1085.9355" x2="1287.4844" y1="1114.1294" y2="1114.1294"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.6748" x="1092.9355" y="1109.3999">UPDATE specs_current</text><polygon fill="#000000" points="255.9697,1139.9287,245.9697,1143.9287,255.9697,1147.9287,251.9697,1143.9287" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="249.9697" x2="414.5181" y1="1143.9287" y2="1143.9287"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.6846" x="261.9697" y="1139.1992">{version: 2}</text><polygon fill="#000000" points="39.9277,1169.728,29.9277,1173.728,39.9277,1177.728,35.9277,1173.728" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="33.9277" x2="243.9697" y1="1173.728" y2="1173.728"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="45.9277" y="1168.9985">200 OK</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1319.5249" x="5" y="1202.6277"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1324.5249" y1="1202.6277" y2="1202.6277"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1324.5249" y1="1205.6277" y2="1205.6277"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="111.2334" x="609.1458" y="1191.728"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92.79" x="615.1458" y="1208.7979">Publish Spec</text><polygon fill="#000000" points="232.9697,1243.3267,242.9697,1247.3267,232.9697,1251.3267,236.9697,1247.3267" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="28.9277" x2="238.9697" y1="1247.3267" y2="1247.3267"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.1431" x="35.9277" y="1242.5972">POST /specs/{id}/publish</text><polygon fill="#000000" points="403.5181,1273.126,413.5181,1277.126,403.5181,1281.126,407.5181,1277.126" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="244.9697" x2="409.5181" y1="1277.126" y2="1277.126"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.4595" x="251.9697" y="1272.3965">PublishSpec command</text><polygon fill="#000000" points="798.8276,1302.9253,808.8276,1306.9253,798.8276,1310.9253,802.8276,1306.9253" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="804.8276" y1="1306.9253" y2="1306.9253"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.0083" x="422.5181" y="1302.1958">get_events(id)</text><polygon fill="#000000" points="426.5181,1332.7246,416.5181,1336.7246,426.5181,1340.7246,422.5181,1336.7246" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="420.5181" x2="809.8276" y1="1336.7246" y2="1336.7246"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="55.1104" x="432.5181" y="1331.9951">[events]</text><polygon fill="#000000" points="633.2393,1362.5239,643.2393,1366.5239,633.2393,1370.5239,637.2393,1366.5239" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="639.2393" y1="1366.5239" y2="1366.5239"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.3315" x="422.5181" y="1361.7944">from_events(events)</text><line style="stroke:#000000;stroke-width:1;" x1="645.2393" x2="687.2393" y1="1396.3232" y2="1396.3232"/><line style="stroke:#000000;stroke-width:1;" x1="687.2393" x2="687.2393" y1="1396.3232" y2="1409.3232"/><line style="stroke:#000000;stroke-width:1;" x1="646.2393" x2="687.2393" y1="1409.3232" y2="1409.3232"/><polygon fill="#000000" points="656.2393,1405.3232,646.2393,1409.3232,656.2393,1413.3232,652.2393,1409.3232" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.1372" x="652.2393" y="1391.5938">Check state == Draft</text><polygon fill="#000000" points="633.2393,1435.1226,643.2393,1439.1226,633.2393,1443.1226,637.2393,1439.1226" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="639.2393" y1="1439.1226" y2="1439.1226"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.6323" x="422.5181" y="1434.3931">handle_command(PublishSpec)</text><polygon fill="#000000" points="426.5181,1464.9219,416.5181,1468.9219,426.5181,1472.9219,422.5181,1468.9219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="420.5181" x2="644.2393" y1="1468.9219" y2="1468.9219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.8726" x="432.5181" y="1464.1924">[StateChanged event]</text><polygon fill="#000000" points="798.8276,1494.7212,808.8276,1498.7212,798.8276,1502.7212,802.8276,1498.7212" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="804.8276" y1="1498.7212" y2="1498.7212"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.4521" x="422.5181" y="1493.9917">append_events()</text><polygon fill="#000000" points="1281.4844,1524.5205,1291.4844,1528.5205,1281.4844,1532.5205,1285.4844,1528.5205" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="810.8276" x2="1287.4844" y1="1528.5205" y2="1528.5205"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.2368" x="817.8276" y="1523.791">INSERT INTO events</text><polygon fill="#000000" points="919.4277,1554.3198,929.4277,1558.3198,919.4277,1562.3198,923.4277,1558.3198" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="415.5181" x2="925.4277" y1="1558.3198" y2="1558.3198"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.8975" x="422.5181" y="1553.5903">publish(event)</text><polygon fill="#000000" points="1073.9355,1584.1191,1083.9355,1588.1191,1073.9355,1592.1191,1077.9355,1588.1191" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="931.4277" x2="1079.9355" y1="1588.1191" y2="1588.1191"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.5078" x="938.4277" y="1583.3896">update_projection()</text><polygon fill="#000000" points="1281.4844,1629.7178,1291.4844,1633.7178,1281.4844,1637.7178,1285.4844,1633.7178" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1085.9355" x2="1287.4844" y1="1633.7178" y2="1633.7178"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.6748" x="1092.9355" y="1613.189">UPDATE specs_current</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.2827" x="1092.9355" y="1628.9883">SET state='published'</text><polygon fill="#000000" points="255.9697,1659.5171,245.9697,1663.5171,255.9697,1667.5171,251.9697,1663.5171" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="249.9697" x2="414.5181" y1="1663.5171" y2="1663.5171"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.4541" x="261.9697" y="1658.7876">{success: true}</text><polygon fill="#000000" points="39.9277,1689.3164,29.9277,1693.3164,39.9277,1697.3164,35.9277,1693.3164" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="33.9277" x2="243.9697" y1="1693.3164" y2="1693.3164"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.604" x="45.9277" y="1688.5869">200 OK</text><!--SRC=[rLJVJzim47xtNt7mGYk1-F4OgPEwacbei7PDYpHHLBdEqNfBdSXskWV4_xwpdPGK24CRBtk9Oz_dk- - - - -Gzky8rGf5ngHYpqcO8IO424jGRAH2EO5mgAmbpBV5N10EDt29mbSAeN6JIh3oUCIvihc5gKBE2Qok5BBYoi3-EamdqHnVxm0tmGkv61_bwJRbcwZDzCzGUjGh_kqXNPQRwowN69J48wUhTBZJU82q9yGamu_vUWdmiZGSiIhCR7kdy1mehSnK01UrPoYrVS8F4vTkbh2Ya2yPwlLeMBrslnvmCSFJ1zHl1Q4WA71iAcPcwLtoDXo1oPOd18QHeX9Q5A_N02EvkLVtNOlka8WZ5gfXFNdSV-RfH93oyKq6xR0juWhxccKpTiUCoKzljz_xLPVDIaygDAn7uf81ElTic5oznHFqMgDAvZvjEb_bZ5qyN4LnyJUBnX9R9C6GmTRnPo4ycLXlCyWAR9MX84HJ1Snr_lylep8NSU28e2zV5lDZEZWYupKlr_JJcejIQyZnMgKTsBzD3sA0sb2M2qseo57M3ZU3ivBIQ3JctYNtmPfXw8YrccDPUEAQB3tIziiBpwOSqRTEl55-YhUMMwHF1a_Wo7apWqtXuzOhWDo5qssAjEvslwmfXwROWm-cyujfvfD_knC4AnKzgnKNsUd2E6PAchtemf7r73xwdnQQZy_ua_gExjiuwU-wi4nX-yIvgFg-llIdUHySLwsScghBybOl-qILl6JhrUQxvdNsRfHhDTDjDuX8FQB_ydrmoKqay2QBq3ghac1wyO1vJ2e66A5XTOej_VWC0]--></g></svg>